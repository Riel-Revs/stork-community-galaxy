<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stork Community Galaxy</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>body { margin: 0; overflow: hidden; }</style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
const { useEffect, useRef, useState } = React;

function BubbleMap() {
  const canvasRef = useRef(null);
  const [members, setMembers] = useState([]);
  const [loading, setLoading] = useState(true);
  const [batch, setBatch] = useState(0);
  const BATCH_SIZE = 35;
  const batches = Math.ceil(members.length / BATCH_SIZE);

  useEffect(() => {
    fetch('./data/members.json')
      .then(r => r.json())
      .then(data => { setMembers(data); setLoading(false); })
      .catch(e => { alert('Error loading members.json: ' + e); setLoading(false); });
  }, []);

  if (loading) return <div className="h-screen bg-gray-900 flex items-center justify-center text-white text-2xl">Loading...</div>;
  if (members.length === 0) return <div className="h-screen bg-gray-900 flex items-center justify-center text-white text-xl">No members found!</div>;

  return (
    <div className="relative h-screen bg-gray-900 overflow-hidden">
      <canvas ref={canvasRef} className="absolute inset-0" />
      
      <div className="absolute top-4 left-4 bg-slate-900/90 text-white px-4 py-2 rounded-xl z-10">
        <p className="font-bold">Stork Galaxy</p>
        <p className="text-xs text-teal-300">{members.length} members loaded</p>
      </div>

      <div className="absolute top-1/2 left-4 -translate-y-1/2 flex flex-col gap-2 z-10">
        <button onClick={() => setBatch(p => (p - 1 + batches) % batches)} 
          className="bg-slate-900/90 text-white p-3 rounded-full">←</button>
        <div className="bg-slate-900/90 text-white px-3 py-2 rounded-xl text-center">
          <p className="text-xs text-teal-300">BATCH</p>
          <p className="font-bold">{batch + 1}/{batches}</p>
        </div>
        <button onClick={() => setBatch(p => (p + 1) % batches)}
          className="bg-slate-900/90 text-white p-3 rounded-full">→</button>
      </div>
    </div>
  );
}

ReactDOM.render(<BubbleMap />, document.getElementById('root'));
    </script>
</body>
</html>
